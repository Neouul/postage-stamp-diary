import { useState } from 'react';
import { X, Zap, Settings } from 'lucide-react';

interface CameraScreenProps {
  onCapture: (imageUrl: string) => void;
  onBack: () => void;
}

const frameStyles = ['Classic', 'Modern', 'Vintage', 'Minimal'];

// Sample images for camera simulation
const sampleImages = [
  'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800',
  'https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=800',
  'https://images.unsplash.com/photo-1501785888041-af3ef285b470?w=800',
  'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=800',
  'https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=800',
];

export function CameraScreen({ onCapture, onBack }: CameraScreenProps) {
  const [activeFrame, setActiveFrame] = useState('Classic');
  const [flash, setFlash] = useState(false);

  const handleCapture = () => {
    // Simulate camera capture with a random sample image
    const randomImage = sampleImages[Math.floor(Math.random() * sampleImages.length)];
    onCapture(randomImage);
  };

  return (
    <div className="fixed inset-0 bg-black flex flex-col">
      {/* Top Bar */}
      <div className="absolute top-0 left-0 right-0 z-10 bg-gradient-to-b from-black/50 to-transparent">
        <div className="flex items-center justify-between p-4">
          <button
            onClick={onBack}
            className="w-10 h-10 flex items-center justify-center rounded-full bg-white/10 backdrop-blur-sm"
            aria-label="Back"
          >
            <X className="w-5 h-5 text-white" />
          </button>
          
          <div className="flex gap-2">
            <button
              onClick={() => setFlash(!flash)}
              className={`w-10 h-10 flex items-center justify-center rounded-full backdrop-blur-sm ${
                flash ? 'bg-white/30' : 'bg-white/10'
              }`}
              aria-label="Toggle flash"
            >
              <Zap className="w-5 h-5 text-white" />
            </button>
            <button
              className="w-10 h-10 flex items-center justify-center rounded-full bg-white/10 backdrop-blur-sm"
              aria-label="Settings"
            >
              <Settings className="w-5 h-5 text-white" />
            </button>
          </div>
        </div>
      </div>

      {/* Camera Viewfinder */}
      <div className="flex-1 relative flex items-center justify-center">
        {/* Simulated camera view with gradient */}
        <div className="absolute inset-0 bg-gradient-to-br from-gray-800 via-gray-700 to-gray-900" />
        
        {/* Stamp Frame Overlay */}
        <div
          className="relative w-[280px] aspect-[3/4] border-2 border-white/40 bg-white/5 backdrop-blur-sm"
          style={{
            clipPath: `polygon(
              0% 1%, 1.5% 1%, 1.5% 0%, 3% 0%, 3% 1%, 4.5% 1%, 4.5% 0%, 6% 0%, 6% 1%, 7.5% 1%, 7.5% 0%, 9% 0%, 9% 1%, 10.5% 1%, 10.5% 0%, 12% 0%, 12% 1%, 13.5% 1%, 13.5% 0%, 15% 0%, 15% 1%, 16.5% 1%, 16.5% 0%, 18% 0%, 18% 1%, 19.5% 1%, 19.5% 0%, 21% 0%, 21% 1%, 22.5% 1%, 22.5% 0%, 24% 0%, 24% 1%, 25.5% 1%, 25.5% 0%, 27% 0%, 27% 1%, 28.5% 1%, 28.5% 0%, 30% 0%, 30% 1%, 31.5% 1%, 31.5% 0%, 33% 0%, 33% 1%, 34.5% 1%, 34.5% 0%, 36% 0%, 36% 1%, 37.5% 1%, 37.5% 0%, 39% 0%, 39% 1%, 40.5% 1%, 40.5% 0%, 42% 0%, 42% 1%, 43.5% 1%, 43.5% 0%, 45% 0%, 45% 1%, 46.5% 1%, 46.5% 0%, 48% 0%, 48% 1%, 49.5% 1%, 49.5% 0%, 51% 0%, 51% 1%, 52.5% 1%, 52.5% 0%, 54% 0%, 54% 1%, 55.5% 1%, 55.5% 0%, 57% 0%, 57% 1%, 58.5% 1%, 58.5% 0%, 60% 0%, 60% 1%, 61.5% 1%, 61.5% 0%, 63% 0%, 63% 1%, 64.5% 1%, 64.5% 0%, 66% 0%, 66% 1%, 67.5% 1%, 67.5% 0%, 69% 0%, 69% 1%, 70.5% 1%, 70.5% 0%, 72% 0%, 72% 1%, 73.5% 1%, 73.5% 0%, 75% 0%, 75% 1%, 76.5% 1%, 76.5% 0%, 78% 0%, 78% 1%, 79.5% 1%, 79.5% 0%, 81% 0%, 81% 1%, 82.5% 1%, 82.5% 0%, 84% 0%, 84% 1%, 85.5% 1%, 85.5% 0%, 87% 0%, 87% 1%, 88.5% 1%, 88.5% 0%, 90% 0%, 90% 1%, 91.5% 1%, 91.5% 0%, 93% 0%, 93% 1%, 94.5% 1%, 94.5% 0%, 96% 0%, 96% 1%, 97.5% 1%, 97.5% 0%, 99% 0%, 99% 1%, 100% 1%, 100% 0%,
              100% 0%, 99% 0%, 99% 1.5%, 100% 1.5%, 100% 3%, 99% 3%, 99% 4.5%, 100% 4.5%, 100% 6%, 99% 6%, 99% 7.5%, 100% 7.5%, 100% 9%, 99% 9%, 99% 10.5%, 100% 10.5%, 100% 12%, 99% 12%, 99% 13.5%, 100% 13.5%, 100% 15%, 99% 15%, 99% 16.5%, 100% 16.5%, 100% 18%, 99% 18%, 99% 19.5%, 100% 19.5%, 100% 21%, 99% 21%, 99% 22.5%, 100% 22.5%, 100% 24%, 99% 24%, 99% 25.5%, 100% 25.5%, 100% 27%, 99% 27%, 99% 28.5%, 100% 28.5%, 100% 30%, 99% 30%, 99% 31.5%, 100% 31.5%, 100% 33%, 99% 33%, 99% 34.5%, 100% 34.5%, 100% 36%, 99% 36%, 99% 37.5%, 100% 37.5%, 100% 39%, 99% 39%, 99% 40.5%, 100% 40.5%, 100% 42%, 99% 42%, 99% 43.5%, 100% 43.5%, 100% 45%, 99% 45%, 99% 46.5%, 100% 46.5%, 100% 48%, 99% 48%, 99% 49.5%, 100% 49.5%, 100% 51%, 99% 51%, 99% 52.5%, 100% 52.5%, 100% 54%, 99% 54%, 99% 55.5%, 100% 55.5%, 100% 57%, 99% 57%, 99% 58.5%, 100% 58.5%, 100% 60%, 99% 60%, 99% 61.5%, 100% 61.5%, 100% 63%, 99% 63%, 99% 64.5%, 100% 64.5%, 100% 66%, 99% 66%, 99% 67.5%, 100% 67.5%, 100% 69%, 99% 69%, 99% 70.5%, 100% 70.5%, 100% 72%, 99% 72%, 99% 73.5%, 100% 73.5%, 100% 75%, 99% 75%, 99% 76.5%, 100% 76.5%, 100% 78%, 99% 78%, 99% 79.5%, 100% 79.5%, 100% 81%, 99% 81%, 99% 82.5%, 100% 82.5%, 100% 84%, 99% 84%, 99% 85.5%, 100% 85.5%, 100% 87%, 99% 87%, 99% 88.5%, 100% 88.5%, 100% 90%, 99% 90%, 99% 91.5%, 100% 91.5%, 100% 93%, 99% 93%, 99% 94.5%, 100% 94.5%, 100% 96%, 99% 96%, 99% 97.5%, 100% 97.5%, 100% 99%, 99% 99%, 99% 100%, 100% 100%,
              100% 100%, 99% 100%, 99% 99%, 97.5% 99%, 97.5% 100%, 96% 100%, 96% 99%, 94.5% 99%, 94.5% 100%, 93% 100%, 93% 99%, 91.5% 99%, 91.5% 100%, 90% 100%, 90% 99%, 88.5% 99%, 88.5% 100%, 87% 100%, 87% 99%, 85.5% 99%, 85.5% 100%, 84% 100%, 84% 99%, 82.5% 99%, 82.5% 100%, 81% 100%, 81% 99%, 79.5% 99%, 79.5% 100%, 78% 100%, 78% 99%, 76.5% 99%, 76.5% 100%, 75% 100%, 75% 99%, 73.5% 99%, 73.5% 100%, 72% 100%, 72% 99%, 70.5% 99%, 70.5% 100%, 69% 100%, 69% 99%, 67.5% 99%, 67.5% 100%, 66% 100%, 66% 99%, 64.5% 99%, 64.5% 100%, 63% 100%, 63% 99%, 61.5% 99%, 61.5% 100%, 60% 100%, 60% 99%, 58.5% 99%, 58.5% 100%, 57% 100%, 57% 99%, 55.5% 99%, 55.5% 100%, 54% 100%, 54% 99%, 52.5% 99%, 52.5% 100%, 51% 100%, 51% 99%, 49.5% 99%, 49.5% 100%, 48% 100%, 48% 99%, 46.5% 99%, 46.5% 100%, 45% 100%, 45% 99%, 43.5% 99%, 43.5% 100%, 42% 100%, 42% 99%, 40.5% 99%, 40.5% 100%, 39% 100%, 39% 99%, 37.5% 99%, 37.5% 100%, 36% 100%, 36% 99%, 34.5% 99%, 34.5% 100%, 33% 100%, 33% 99%, 31.5% 99%, 31.5% 100%, 30% 100%, 30% 99%, 28.5% 99%, 28.5% 100%, 27% 100%, 27% 99%, 25.5% 99%, 25.5% 100%, 24% 100%, 24% 99%, 22.5% 99%, 22.5% 100%, 21% 100%, 21% 99%, 19.5% 99%, 19.5% 100%, 18% 100%, 18% 99%, 16.5% 99%, 16.5% 100%, 15% 100%, 15% 99%, 13.5% 99%, 13.5% 100%, 12% 100%, 12% 99%, 10.5% 99%, 10.5% 100%, 9% 100%, 9% 99%, 7.5% 99%, 7.5% 100%, 6% 100%, 6% 99%, 4.5% 99%, 4.5% 100%, 3% 100%, 3% 99%, 1.5% 99%, 1.5% 100%, 0% 100%, 0% 99%,
              0% 99%, 1.5% 99%, 1.5% 97.5%, 0% 97.5%, 0% 96%, 1.5% 96%, 1.5% 94.5%, 0% 94.5%, 0% 93%, 1.5% 93%, 1.5% 91.5%, 0% 91.5%, 0% 90%, 1.5% 90%, 1.5% 88.5%, 0% 88.5%, 0% 87%, 1.5% 87%, 1.5% 85.5%, 0% 85.5%, 0% 84%, 1.5% 84%, 1.5% 82.5%, 0% 82.5%, 0% 81%, 1.5% 81%, 1.5% 79.5%, 0% 79.5%, 0% 78%, 1.5% 78%, 1.5% 76.5%, 0% 76.5%, 0% 75%, 1.5% 75%, 1.5% 73.5%, 0% 73.5%, 0% 72%, 1.5% 72%, 1.5% 70.5%, 0% 70.5%, 0% 69%, 1.5% 69%, 1.5% 67.5%, 0% 67.5%, 0% 66%, 1.5% 66%, 1.5% 64.5%, 0% 64.5%, 0% 63%, 1.5% 63%, 1.5% 61.5%, 0% 61.5%, 0% 60%, 1.5% 60%, 1.5% 58.5%, 0% 58.5%, 0% 57%, 1.5% 57%, 1.5% 55.5%, 0% 55.5%, 0% 54%, 1.5% 54%, 1.5% 52.5%, 0% 52.5%, 0% 51%, 1.5% 51%, 1.5% 49.5%, 0% 49.5%, 0% 48%, 1.5% 48%, 1.5% 46.5%, 0% 46.5%, 0% 45%, 1.5% 45%, 1.5% 43.5%, 0% 43.5%, 0% 42%, 1.5% 42%, 1.5% 40.5%, 0% 40.5%, 0% 39%, 1.5% 39%, 1.5% 37.5%, 0% 37.5%, 0% 36%, 1.5% 36%, 1.5% 34.5%, 0% 34.5%, 0% 33%, 1.5% 33%, 1.5% 31.5%, 0% 31.5%, 0% 30%, 1.5% 30%, 1.5% 28.5%, 0% 28.5%, 0% 27%, 1.5% 27%, 1.5% 25.5%, 0% 25.5%, 0% 24%, 1.5% 24%, 1.5% 22.5%, 0% 22.5%, 0% 21%, 1.5% 21%, 1.5% 19.5%, 0% 19.5%, 0% 18%, 1.5% 18%, 1.5% 16.5%, 0% 16.5%, 0% 15%, 1.5% 15%, 1.5% 13.5%, 0% 13.5%, 0% 12%, 1.5% 12%, 1.5% 10.5%, 0% 10.5%, 0% 9%, 1.5% 9%, 1.5% 7.5%, 0% 7.5%, 0% 6%, 1.5% 6%, 1.5% 4.5%, 0% 4.5%, 0% 3%, 1.5% 3%, 1.5% 1.5%, 0% 1.5%, 0% 1%
            )`,
          }}
        >
          <div className="absolute inset-4 flex items-center justify-center text-white/20 text-sm text-center">
            Frame your moment
          </div>
        </div>
      </div>

      {/* Bottom Controls */}
      <div className="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/50 to-transparent pb-8">
        {/* Frame Styles */}
        <div className="flex justify-center gap-4 mb-6 px-4 overflow-x-auto no-scrollbar">
          {frameStyles.map((style) => (
            <button
              key={style}
              onClick={() => setActiveFrame(style)}
              className={`px-4 py-2 rounded-full text-sm whitespace-nowrap transition-colors ${
                activeFrame === style
                  ? 'bg-white text-black'
                  : 'bg-white/10 text-white backdrop-blur-sm'
              }`}
            >
              {style}
            </button>
          ))}
        </div>

        {/* Shutter Button */}
        <div className="flex justify-center">
          <button
            onClick={handleCapture}
            className="w-16 h-16 rounded-full bg-white border-4 border-white/30 hover:bg-gray-100 transition-colors"
            aria-label="Capture"
          />
        </div>
      </div>
    </div>
  );
}
